<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Test Zapier</title>
</head>
<body>
  <input id="arcInput" type="text" placeholder="ID Arc"/>
  <button id="analyzeBtn">Lancer l’analyse</button>

  <script>
    const ZAPIER_ANALYSE_URL = "https://hooks.zapier.com/hooks/catch/22577005/2vi1erx/";

    document.getElementById("analyzeBtn").addEventListener("click", async () => {
      const arcIdentifier = document.getElementById("arcInput").value.trim();
      if (!arcIdentifier) {
        alert("Veuillez saisir un ID Arc valide.");
        return;
      }
      try {
        // PAS de header “Content-Type” ici
        const resp = await fetch(ZAPIER_ANALYSE_URL, {
          method: "POST",
          body: JSON.stringify({ arcIdentifier })
        });
        console.log("Statut Zapier :", resp.status);
        const data = await resp.json();
        console.log("Corps Zapier :", data);
      } catch(err) {
        console.error("Erreur fetch :", err);
      }
    });
  </script>
</body>
</html>
